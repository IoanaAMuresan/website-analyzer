<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Improvement Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 100%);
            padding: 40px;
            text-align: center;
            color: white;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .kirin-logo {
            width: 100px;
            height: 100px;
            background: url('https://raw.githubusercontent.com/IoanaAMuresan/website-analyzer/main/Kirin%20logo.png') center/contain no-repeat;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .input-section {
            padding: 40px;
            background: #f8fafc;
        }

        .url-input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .url-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .url-input:focus {
            outline: none;
            border-color: #FF6B6B;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        .analyze-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #64748b;
            display: none;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #FF6B6B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            padding: 40px;
            display: none;
        }

        .results.show {
            display: block;
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-header h2 {
            font-size: 2rem;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .analyzed-url {
            color: #64748b;
            font-size: 1.1rem;
            word-break: break-all;
        }

        .analysis-summary {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            color: #475569;
            line-height: 1.6;
        }

        .analysis-summary h3 {
            color: #1e293b;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .analysis-summary a {
            color: #3b82f6;
            text-decoration: none;
        }

        .analysis-summary a:hover {
            text-decoration: underline;
        }

        .improvement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .improvement-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #4facfe;
            transition: transform 0.3s ease;
        }

        .improvement-card:hover {
            transform: translateY(-5px);
        }

        .improvement-card h3 {
            color: #1e293b;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .improvement-card .icon {
            font-size: 1.5rem;
        }

        .improvement-list {
            list-style: none;
        }

        .improvement-list li {
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
            color: #475569;
        }

        .improvement-list li:last-child {
            border-bottom: none;
        }

        .improvement-list li::before {
            content: "‚Üí";
            color: #4facfe;
            font-weight: bold;
            margin-right: 10px;
        }

        .recommendation-text {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .recommendation-source {
            font-size: 0.85rem;
            color: #64748b;
            font-style: italic;
        }

        .source-location {
            font-size: 0.8rem;
            color: #059669;
            background: #f0fdf4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            margin-top: 4px;
            display: inline-block;
        }

        .priority-high { border-left-color: #ef4444; }
        .priority-medium { border-left-color: #f59e0b; }
        .priority-low { border-left-color: #10b981; }

        .priority-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: auto;
        }

        .priority-high .priority-badge {
            background: #fee2e2;
            color: #dc2626;
        }

        .priority-medium .priority-badge {
            background: #fef3c7;
            color: #d97706;
        }

        .priority-low .priority-badge {
            background: #d1fae5;
            color: #059669;
        }

        .export-section {
            margin-top: 40px;
            text-align: center;
            padding: 30px;
            background: #f8fafc;
            border-radius: 15px;
        }

        .export-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .error {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="kirin-logo"></div>
                <div>
                    <h1>üîç Website Improvement Analyzer</h1>
                    <p style="font-size: 1rem; margin-top: 5px; opacity: 0.9;">TEAM KIRIN ‚Ä¢ WORDPRESS.COM HAPPINESS</p>
                </div>
            </div>
            <p>Analyze any website and discover actionable improvements for your customers</p>
        </div>

        <div class="input-section">
            <div class="url-input-group">
                <input type="url" class="url-input" placeholder="Enter website URL (e.g., https://example.com)" id="urlInput">
                <button class="analyze-btn" onclick="analyzeWebsite()">Analyze Site</button>
            </div>

            <p style="color: #64748b; font-size: 0.9rem; margin-top: 10px;">
                üí° This tool analyzes website elements and provides WordPress.com-focused improvement suggestions
            </p>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Analyzing website... This may take a moment.</p>
        </div>

        <div class="results" id="results">
            <div class="results-header">
                <h2>Analysis Results</h2>
                <div class="analyzed-url" id="analyzedUrl"></div>
            </div>

            <div class="analysis-summary" id="analysisSummary">
                <!-- Summary will be populated here -->
            </div>

            <div class="improvement-grid" id="improvementGrid">
                <!-- Results will be populated here -->
            </div>

            <div class="export-section">
                <button class="export-btn" onclick="exportResults()">üìã Export Report</button>
                <p style="color: #64748b; font-size: 0.9rem; margin-top: 10px;">
                    Export as text to share with your customer
                </p>
            </div>
        </div>
    </div>

    <script>
        let analysisResults = {};
        let siteAnalysisData = {};

        // WordPress.com support documentation links
        const wpcomSupportLinks = {
            seo: 'https://wordpress.com/support/seo/',
            performance: 'https://wordpress.com/support/site-speed/',
            themes: 'https://wordpress.com/support/themes/',
            plugins: 'https://wordpress.com/support/plugins/',
            media: 'https://wordpress.com/support/media/',
            jetpack: 'https://wordpress.com/support/jetpack/',
            plans: 'https://wordpress.com/support/plans/',
            domains: 'https://wordpress.com/support/domains/',
            security: 'https://wordpress.com/support/security/',
            analytics: 'https://wordpress.com/support/google-analytics/',
            accessibility: 'https://wordpress.com/support/accessibility/',
            mobile: 'https://wordpress.com/support/mobile-theme/',
            customization: 'https://wordpress.com/support/customization/'
        };

        async function analyzeWebsite() {
            const urlInput = document.getElementById('urlInput');
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Please enter a website URL');
                return;
            }

            let targetUrl = url;
            if (!targetUrl.startsWith('http://') && !targetUrl.startsWith('https://')) {
                targetUrl = 'https://' + targetUrl;
                urlInput.value = targetUrl;
            }

            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').classList.remove('show');
            document.querySelector('.analyze-btn').disabled = true;

            try {
                await performRealAnalysis(targetUrl);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').classList.add('show');
                document.getElementById('analyzedUrl').textContent = targetUrl;
                
            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                showError('Analysis completed with limited data. Some checks may require direct site access.');
                document.getElementById('results').classList.add('show');
                document.getElementById('analyzedUrl').textContent = targetUrl;
            } finally {
                document.querySelector('.analyze-btn').disabled = false;
            }
        }

        async function performRealAnalysis(url) {
            const improvements = {
                seo: [],
                performance: [],
                wordpress: [],
                ux: [],
                accessibility: [],
                content: [],
                technical: [],
                mobile: [],
                security: [],
                analytics: []
            };

            // Initialize site analysis data
            siteAnalysisData = {
                url: url,
                hasHTTPS: url.startsWith('https://'),
                urlLength: url.length,
                domain: new URL(url).hostname,
                isWordPressCom: new URL(url).hostname.includes('wordpress.com'),
                pageData: null
            };

            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 1500));

            // Try to fetch and analyze the actual page
            try {
                await fetchAndAnalyzePage(url, improvements);
            } catch (error) {
                console.log('Cannot fetch page directly - using URL-based analysis');
                // Fallback to URL-based analysis
                analyzeUrlStructure(url, improvements);
            }

            // Add comprehensive recommendations
            addWordPressRecommendations(url, improvements);
            addPerformanceRecommendations(url, improvements);
            addSEORecommendations(url, improvements);
            addUXRecommendations(url, improvements);
            addAccessibilityRecommendations(url, improvements);
            addContentRecommendations(url, improvements);
            addTechnicalRecommendations(url, improvements);
            addMobileRecommendations(url, improvements);
            addSecurityRecommendations(url, improvements);
            addAnalyticsRecommendations(url, improvements);

            // Compile results
            analysisResults = {
                url: url,
                improvements: compileResults(improvements)
            };

            displayResults();
        }

        async function fetchAndAnalyzePage(url, improvements) {
            try {
                // Note: This will only work for same-origin or CORS-enabled sites
                // For production, you'd want to use a proxy service
                const response = await fetch(url, { mode: 'cors' });
                const html = await response.text();
                
                // Parse HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                siteAnalysisData.pageData = doc;

                // Analyze specific elements
                analyzeTitleTags(doc, improvements);
                analyzeMetaDescriptions(doc, improvements);
                analyzeImages(doc, improvements);
                analyzeHeadings(doc, improvements);
                analyzeLinks(doc, improvements);
                analyzeForms(doc, improvements);
                analyzeCanonicalTags(doc, improvements);
                analyzeMetaTags(doc, improvements);
                analyzeContentQuality(doc, improvements);
                analyzeMobileOptimization(doc, improvements);
                analyzeStructuredData(doc, improvements);
                analyzeInternalLinking(doc, improvements);
                
            } catch (error) {
                // If we can't fetch the page, fall back to URL analysis
                analyzeUrlStructure(url, improvements);
                throw error;
            }
        }

        function analyzeTitleTags(doc, improvements) {
            const titleElement = doc.querySelector('title');
            if (!titleElement) {
                improvements.seo.push({
                    text: 'Missing page title - add a descriptive title tag',
                    reference: 'WordPress SEO best practices',
                    location: '<head> section - no <title> tag found'
                });
            } else {
                const titleText = titleElement.textContent.trim();
                if (titleText.length === 0) {
                    improvements.seo.push({
                        text: 'Empty page title - add descriptive content to title tag',
                        reference: 'WordPress SEO best practices',
                        location: '<title> tag in <head> section'
                    });
                } else if (titleText.length > 60) {
                    improvements.seo.push({
                        text: 'Page title is too long (over 60 characters) - consider shortening',
                        reference: 'Google SERP optimization guide',
                        location: `<title> tag: "${titleText.substring(0, 50)}..."`
                    });
                }
            }
        }

        function analyzeMetaDescriptions(doc, improvements) {
            const metaDesc = doc.querySelector('meta[name="description"]');
            if (!metaDesc) {
                improvements.seo.push({
                    text: 'Missing meta description - add one for better search results',
                    reference: 'Google SEO best practices',
                    location: '<head> section - no meta description found'
                });
            } else {
                const content = metaDesc.getAttribute('content') || '';
                if (content.length === 0) {
                    improvements.seo.push({
                        text: 'Empty meta description - add descriptive content',
                        reference: 'Google SEO best practices',
                        location: '<meta name="description"> tag in <head>'
                    });
                } else if (content.length > 160) {
                    improvements.seo.push({
                        text: 'Meta description is too long (over 160 characters)',
                        reference: 'Google SERP optimization guide',
                        location: `Meta description: "${content.substring(0, 50)}..."`
                    });
                }
            }
        }

        function analyzeImages(doc, improvements) {
            const images = doc.querySelectorAll('img');
            let imagesWithoutAlt = 0;
            let largeImages = 0;
            
            images.forEach((img, index) => {
                if (!img.hasAttribute('alt') || img.getAttribute('alt').trim() === '') {
                    imagesWithoutAlt++;
                }
                
                // Check for potentially large images (basic heuristic)
                const src = img.getAttribute('src');
                if (src && (src.includes('full') || src.includes('large') || !src.includes('thumbnail'))) {
                    largeImages++;
                }
            });

            if (imagesWithoutAlt > 0) {
                improvements.accessibility.push({
                    text: `${imagesWithoutAlt} image(s) missing alt text for screen readers`,
                    reference: 'WCAG 2.1 accessibility standards',
                    location: `Found ${imagesWithoutAlt} img tags without alt attributes`
                });
            }

            if (largeImages > 3) {
                improvements.performance.push({
                    text: 'Multiple large images detected - consider optimization',
                    reference: 'Google PageSpeed Insights',
                    location: `${largeImages} potentially large images found on page`
                });
            }
        }

        function analyzeHeadings(doc, improvements) {
            const h1Tags = doc.querySelectorAll('h1');
            const headings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
            
            if (h1Tags.length === 0) {
                improvements.seo.push({
                    text: 'No H1 heading found - add a main heading for better SEO',
                    reference: 'SEO content structure guidelines',
                    location: 'Page body - no <h1> tag detected'
                });
            } else if (h1Tags.length > 1) {
                improvements.seo.push({
                    text: 'Multiple H1 headings found - use only one H1 per page',
                    reference: 'SEO content structure guidelines',
                    location: `${h1Tags.length} <h1> tags found on page`
                });
            }

            if (headings.length < 3) {
                improvements.content.push({
                    text: 'Limited heading structure - add more subheadings for better readability',
                    reference: 'Content readability best practices',
                    location: `Only ${headings.length} heading tags found on page`
                });
            }
        }

        function analyzeLinks(doc, improvements) {
            const externalLinks = doc.querySelectorAll('a[href^="http"]:not([href*="' + siteAnalysisData.domain + '"])');
            const linksWithoutText = doc.querySelectorAll('a:empty, a[aria-label=""], a[title=""]');
            
            let externalLinksWithoutTarget = 0;
            externalLinks.forEach(link => {
                if (!link.hasAttribute('target') || link.getAttribute('target') !== '_blank') {
                    externalLinksWithoutTarget++;
                }
            });

            if (externalLinksWithoutTarget > 0) {
                improvements.ux.push({
                    text: `${externalLinksWithoutTarget} external link(s) should open in new tab`,
                    reference: 'User experience best practices',
                    location: `${externalLinksWithoutTarget} external links without target="_blank"`
                });
            }

            if (linksWithoutText.length > 0) {
                improvements.accessibility.push({
                    text: `${linksWithoutText.length} link(s) missing descriptive text`,
                    reference: 'WCAG 2.1 link accessibility',
                    location: `${linksWithoutText.length} empty or unlabeled link tags`
                });
            }
        }

        function analyzeForms(doc, improvements) {
            const forms = doc.querySelectorAll('form');
            const inputsWithoutLabels = doc.querySelectorAll('input:not([type="hidden"]):not([aria-label]):not([id])');
            
            if (forms.length > 0 && inputsWithoutLabels.length > 0) {
                improvements.accessibility.push({
                    text: `${inputsWithoutLabels.length} form input(s) missing proper labels`,
                    reference: 'WCAG 2.1 form accessibility',
                    location: `${inputsWithoutLabels.length} input elements without labels or IDs`
                });
            }
        }

        function analyzeCanonicalTags(doc, improvements) {
            const canonicalTags = doc.querySelectorAll('link[rel="canonical"]');
            
            if (canonicalTags.length === 0) {
                improvements.technical.push({
                    text: 'Missing canonical tag - add to prevent duplicate content issues',
                    reference: 'Google SEO technical guidelines',
                    location: '<head> section - no canonical link found'
                });
            } else if (canonicalTags.length > 1) {
                improvements.technical.push({
                    text: 'Multiple canonical tags found - should only have one per page',
                    reference: 'Google SEO technical guidelines',
                    location: `${canonicalTags.length} canonical tags detected in <head>`
                });
            }
        }

        function analyzeMetaTags(doc, improvements) {
            const viewport = doc.querySelector('meta[name="viewport"]');
            const robots = doc.querySelector('meta[name="robots"]');
            const ogTags = doc.querySelectorAll('meta[property^="og:"]');
            
            if (!viewport) {
                improvements.mobile.push({
                    text: 'Missing viewport meta tag for mobile optimization',
                    reference: 'Google Mobile-First indexing guidelines',
                    location: '<head> section - no viewport meta tag'
                });
            }

            if (!robots) {
                improvements.technical.push({
                    text: 'Missing robots meta tag - consider adding for better crawl control',
                    reference: 'Google crawling and indexing guide',
                    location: '<head> section - no robots meta tag'
                });
            }

            if (ogTags.length < 3) {
                improvements.seo.push({
                    text: 'Limited Open Graph tags - add more for better social sharing',
                    reference: 'Facebook Open Graph documentation',
                    location: `Only ${ogTags.length} Open Graph tags found in <head>`
                });
            }
        }

        function analyzeContentQuality(doc, improvements) {
            const bodyText = doc.body ? doc.body.textContent : '';
            const wordCount = bodyText.trim().split(/\s+/).length;
            const paragraphs = doc.querySelectorAll('p');
            const longParagraphs = Array.from(paragraphs).filter(p => p.textContent.split(/\s+/).length > 100);
            
            if (wordCount < 300) {
                improvements.content.push({
                    text: 'Content appears thin - consider adding more valuable content (aim for 300+ words)',
                    reference: 'Google content quality guidelines',
                    location: `Current estimated word count: ${wordCount} words`
                });
            }

            if (longParagraphs.length > 0) {
                improvements.content.push({
                    text: `${longParagraphs.length} paragraph(s) are very long - break into shorter sections`,
                    reference: 'Content readability best practices',
                    location: `${longParagraphs.length} paragraphs with 100+ words detected`
                });
            }

            // Check for missing publication date
            const timeElements = doc.querySelectorAll('time[datetime], .published, .post-date');
            if (timeElements.length === 0) {
                improvements.content.push({
                    text: 'Consider adding publication dates to content for better credibility',
                    reference: 'Content trust signals',
                    location: 'No timestamp or publication date elements found'
                });
            }
        }

        function analyzeMobileOptimization(doc, improvements) {
            const viewport = doc.querySelector('meta[name="viewport"]');
            if (viewport) {
                const content = viewport.getAttribute('content') || '';
                if (!content.includes('width=device-width')) {
                    improvements.mobile.push({
                        text: 'Viewport meta tag should include width=device-width',
                        reference: 'Google Mobile-First indexing',
                        location: `Current viewport content: "${content}"`
                    });
                }
            }

            // Check for touch-friendly elements
            const smallClickableElements = doc.querySelectorAll('a, button');
            let potentiallySmallElements = 0;
            smallClickableElements.forEach(el => {
                const style = window.getComputedStyle ? window.getComputedStyle(el) : null;
                // This is a basic heuristic - in production you'd want more sophisticated checking
                if (el.textContent && el.textContent.trim().length < 3) {
                    potentiallySmallElements++;
                }
            });

            if (potentiallySmallElements > 5) {
                improvements.mobile.push({
                    text: 'Multiple small clickable elements detected - ensure adequate touch targets',
                    reference: 'Google mobile usability guidelines',
                    location: `${potentiallySmallElements} potentially small clickable elements`
                });
            }
        }

        function analyzeStructuredData(doc, improvements) {
            const jsonLdScripts = doc.querySelectorAll('script[type="application/ld+json"]');
            const microdataElements = doc.querySelectorAll('[itemscope]');
            
            if (jsonLdScripts.length === 0 && microdataElements.length === 0) {
                improvements.seo.push({
                    text: 'No structured data found - add schema markup for better search results',
                    reference: 'Google structured data guidelines',
                    location: 'No JSON-LD or microdata detected on page'
                });
            }
        }

        function analyzeInternalLinking(doc, improvements) {
            const internalLinks = doc.querySelectorAll(`a[href*="${siteAnalysisData.domain}"], a[href^="/"], a[href^="./"], a[href^="../"]`);
            const totalWords = doc.body ? doc.body.textContent.trim().split(/\s+/).length : 0;
            
            if (totalWords > 500 && internalLinks.length < 3) {
                improvements.seo.push({
                    text: 'Limited internal linking - add more links to related content',
                    reference: 'SEO internal linking best practices',
                    location: `Only ${internalLinks.length} internal links found in ${totalWords} words of content`
                });
            }
        }

        function analyzeUrlStructure(url, improvements) {
            const urlObj = new URL(url);
            
            if (siteAnalysisData.isWordPressCom) {
                improvements.wordpress.push({
                    text: 'Confirmed WordPress.com site - perfect for our recommendations!',
                    reference: 'WordPress.com platform identification',
                    location: `Domain: ${urlObj.hostname}`
                });
            }
            
            if (siteAnalysisData.urlLength > 60) {
                improvements.seo.push({
                    text: 'URL is quite long - consider shortening for better SEO',
                    reference: 'Google URL structure guidelines',
                    location: `Current URL length: ${siteAnalysisData.urlLength} characters`
                });
            }
            
            if (urlObj.pathname.includes('_') || urlObj.pathname.includes('%20')) {
                improvements.seo.
