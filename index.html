<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Improvement Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 100%);
            padding: 40px;
            text-align: center;
            color: white;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .kirin-logo {
            width: 80px;
            height: 80px;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDUwMCA1MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNTAgNTBMMzAwIDEwMEwyNTAgMTUwTDIwMCAxMDBMMjUwIDUwWiIgc3Ryb2tlPSIjRkY2QjZCIiBzdHJva2Utd2lkdGg9IjgiIGZpbGw9Im5vbmUiLz4KPGF1Y2lyY2xlIGN4PSIxNzAiIGN5PSIyMDAiIHI9IjMwIiBzdHJva2U9IiNGRjZCNkIiIHN0cm9rZS13aWR0aD0iOCIgZmlsbD0ibm9uZSIvPgo8Y2lyY2xlIGN4PSIxNzAiIGN5PSIyMDAiIHI9IjE1IiBzdHJva2U9IiNGRjZCNkIiIHN0cm9rZS13aWR0aD0iNCIgZmlsbD0ibm9uZSIvPgo8Y2lyY2xlIGN4PSIzMzAiIGN5PSIyMDAiIHI9IjMwIiBzdHJva2U9IiNGRjZCNkIiIHN0cm9rZS13aWR0aD0iOCIgZmlsbD0ibm9uZSIvPgo8Y2lyY2xlIGN4PSIzMzAiIGN5PSIyMDAiIHI9IjE1IiBzdHJva2U9IiNGRjZCNkIiIHN0cm9rZS13aWR0aD0iNCIgZmlsbD0ibm9uZSIvPgo8cGF0aCBkPSJNMTAwIDEwMEM5MCAyNTAgNDEwIDI1MCA0MDAgMTAwIiBzdHJva2U9IiNGRkQ5M0QiIHN0cm9rZS13aWR0aD0iMTAiIGZpbGw9Im5vbmUiLz4KPHN2ZyBjbGFzcz0ibG9nby1pbWFnZSI+CjxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiBmaWxsPSJ0cmFuc3BhcmVudCIvPgo8L3N2Zz4KPC9zdmc+') center/contain no-repeat;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .input-section {
            padding: 40px;
            background: #f8fafc;
        }

        .url-input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .url-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .url-input:focus {
            outline: none;
            border-color: #FF6B6B;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        .analyze-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #64748b;
            display: none;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #FF6B6B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            padding: 40px;
            display: none;
        }

        .results.show {
            display: block;
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-header h2 {
            font-size: 2rem;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .analyzed-url {
            color: #64748b;
            font-size: 1.1rem;
            word-break: break-all;
        }

        .improvement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .improvement-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #4facfe;
            transition: transform 0.3s ease;
        }

        .improvement-card:hover {
            transform: translateY(-5px);
        }

        .improvement-card h3 {
            color: #1e293b;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .improvement-card .icon {
            font-size: 1.5rem;
        }

        .improvement-list {
            list-style: none;
        }

        .improvement-list li {
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
            color: #475569;
        }

        .improvement-list li:last-child {
            border-bottom: none;
        }

        .improvement-list li::before {
            content: "‚Üí";
            color: #4facfe;
            font-weight: bold;
            margin-right: 10px;
        }

        .recommendation-text {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .recommendation-source {
            font-size: 0.85rem;
            color: #64748b;
            font-style: italic;
        }

        .priority-high { border-left-color: #ef4444; }
        .priority-medium { border-left-color: #f59e0b; }
        .priority-low { border-left-color: #10b981; }

        .priority-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: auto;
        }

        .priority-high .priority-badge {
            background: #fee2e2;
            color: #dc2626;
        }

        .priority-medium .priority-badge {
            background: #fef3c7;
            color: #d97706;
        }

        .priority-low .priority-badge {
            background: #d1fae5;
            color: #059669;
        }

        .export-section {
            margin-top: 40px;
            text-align: center;
            padding: 30px;
            background: #f8fafc;
            border-radius: 15px;
        }

        .export-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .error {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }


    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="kirin-logo"></div>
                <div>
                    <h1>üîç Website Improvement Analyzer</h1>
                    <p style="font-size: 1rem; margin-top: 5px; opacity: 0.9;">TEAM KIRIN ‚Ä¢ WORDPRESS.COM HAPPINESS</p>
                </div>
            </div>
            <p>Analyze any website and discover actionable improvements for your customers</p>
        </div>

        <div class="input-section">
            <div class="url-input-group">
                <input type="url" class="url-input" placeholder="Enter website URL (e.g., https://example.com)" id="urlInput">
                <button class="analyze-btn" onclick="analyzeWebsite()">Analyze Site</button>
            </div>

            <p style="color: #64748b; font-size: 0.9rem; margin-top: 10px;">
                üí° This tool analyzes website elements and provides WordPress.com-focused improvement suggestions
            </p>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Analyzing website... This may take a moment.</p>
        </div>

        <div class="results" id="results">
            <div class="results-header">
                <h2>Analysis Results</h2>
                <div class="analyzed-url" id="analyzedUrl"></div>
            </div>

            <div class="improvement-grid" id="improvementGrid">
                <!-- Results will be populated here -->
            </div>

            <div class="export-section">
                <button class="export-btn" onclick="exportResults()">üìã Export Report</button>
                <p style="color: #64748b; font-size: 0.9rem; margin-top: 10px;">
                    Export as text to share with your customer
                </p>
            </div>
        </div>
    </div>

    <script>
        let analysisResults = {};

        async function analyzeWebsite() {
            const urlInput = document.getElementById('urlInput');
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Please enter a website URL');
                return;
            }

            let targetUrl = url;
            if (!targetUrl.startsWith('http://') && !targetUrl.startsWith('https://')) {
                targetUrl = 'https://' + targetUrl;
                urlInput.value = targetUrl;
            }

            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').classList.remove('show');
            document.querySelector('.analyze-btn').disabled = true;

            try {
                await performRealAnalysis(targetUrl);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').classList.add('show');
                document.getElementById('analyzedUrl').textContent = targetUrl;
                
            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                showError('Analysis completed with limited data. Some checks may require direct site access.');
                // Still show results even if there were errors
                document.getElementById('results').classList.add('show');
                document.getElementById('analyzedUrl').textContent = targetUrl;
            } finally {
                document.querySelector('.analyze-btn').disabled = false;
            }
        }

        async function performRealAnalysis(url) {
            try {
                // Call the test API first
                const response = await fetch('https://website-analyzer-4f8s.vercel.app/api/test', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ url: url })
                });

                if (!response.ok) {
                    throw new Error(`Analysis failed: ${response.status}`);
                }

                const data = await response.json();
                
                // Store the real results
                analysisResults = data;
                
                displayResults();
                
            } catch (error) {
                console.error('Analysis error:', error);
                
                // Fallback to basic analysis if API fails
                showError('Unable to connect to analysis server. Showing basic recommendations.');
                
                // Provide basic fallback analysis
                const fallbackResults = {
                    url: url,
                    improvements: [
                        {
                            category: 'Connection Issue',
                            icon: '‚ö†Ô∏è',
                            priority: 'high',
                            items: [
                                { text: 'Unable to analyze site - check if URL is correct and accessible', source: 'Connection error' },
                                { text: 'Consider WordPress.com hosting for reliable uptime', source: 'WordPress.com benefits' }
                            ]
                        }
                    ]
                };
                
                analysisResults = fallbackResults;
                displayResults();
            }
        }

        function analyzeUrlStructure(url, improvements) {
            const urlObj = new URL(url);
            
            // Check if it's a WordPress.com site
            if (urlObj.hostname.includes('wordpress.com')) {
                improvements.wordpress.push('Confirmed WordPress.com site - perfect for our recommendations!');
            }
            
            // Check URL structure
            if (url.length > 60) {
                improvements.seo.push('URL is quite long - consider shortening for better SEO');
            }
            
            if (urlObj.pathname.includes('_') || urlObj.pathname.includes('%20')) {
                improvements.seo.push('URL contains underscores or spaces - use hyphens instead');
            }
            
            if (!urlObj.protocol.includes('https')) {
                improvements.seo.push('Site should use HTTPS for security and SEO benefits');
            }
        }

        function addWordPressRecommendations(url, improvements) {
            const wpRecommendations = [
                { text: 'Consider upgrading to WordPress.com Business plan for advanced customization options', source: 'WordPress.com pricing page analysis' },
                { text: 'Review and update WordPress themes regularly for security and performance', source: 'WordPress security best practices' },
                { text: 'Optimize images using WordPress.com\'s built-in image optimization', source: 'WordPress.com feature documentation' },
                { text: 'Set up Jetpack features for better performance and security', source: 'Jetpack plugin recommendations' },
                { text: 'Consider using WordPress.com\'s CDN for faster global loading', source: 'WordPress.com performance tools' },
                { text: 'Review plugin usage - remove unnecessary plugins to improve performance', source: 'WordPress performance optimization guide' },
                { text: 'Set up automated backups through WordPress.com', source: 'WordPress.com backup feature' },
                { text: 'Configure proper caching settings for better speed', source: 'WordPress caching best practices' },
                { text: 'Use WordPress.com\'s built-in SEO tools and meta descriptions', source: 'WordPress.com SEO features' }
            ];

            // Add 3-5 random recommendations
            const shuffled = wpRecommendations.sort(() => 0.5 - Math.random());
            improvements.wordpress.push(...shuffled.slice(0, Math.floor(Math.random() * 3) + 3));
        }

        function addSEORecommendations(url, improvements) {
            const seoRecommendations = [
                { text: 'Add meta descriptions to all pages (aim for 150-160 characters)', source: 'Google SEO best practices' },
                { text: 'Ensure each page has a unique, descriptive title tag', source: 'Google Search Console guidelines' },
                { text: 'Add alt text to all images for better accessibility and SEO', source: 'WCAG 2.1 accessibility standards' },
                { text: 'Create an XML sitemap and submit to Google Search Console', source: 'Google Search Console documentation' },
                { text: 'Improve internal linking between related pages', source: 'SEO internal linking best practices' },
                { text: 'Add schema markup for better search engine understanding', source: 'Google structured data guidelines' },
                { text: 'Optimize page loading speed for better search rankings', source: 'Google Core Web Vitals' },
                { text: 'Create compelling meta titles (50-60 characters)', source: 'Google SERP optimization guide' },
                { text: 'Add Open Graph tags for better social media sharing', source: 'Facebook Open Graph documentation' },
                { text: 'Consider adding breadcrumb navigation', source: 'Google structured data guidelines' }
            ];

            const shuffled = seoRecommendations.sort(() => 0.5 - Math.random());
            improvements.seo.push(...shuffled.slice(0, Math.floor(Math.random() * 4) + 4));
        }

        function addPerformanceRecommendations(url, improvements) {
            const perfRecommendations = [
                { text: 'Optimize images by compressing and using modern formats (WebP)', source: 'Google PageSpeed Insights' },
                { text: 'Minimize HTTP requests by combining CSS and JavaScript files', source: 'Web performance optimization standards' },
                { text: 'Enable browser caching for static resources', source: 'Google PageSpeed Insights' },
                { text: 'Consider implementing lazy loading for images below the fold', source: 'Google Core Web Vitals guide' },
                { text: 'Minify CSS and JavaScript files', source: 'Web performance best practices' },
                { text: 'Use a Content Delivery Network (CDN) for faster global access', source: 'Performance optimization guidelines' },
                { text: 'Optimize database queries and remove unused plugins', source: 'WordPress performance optimization' },
                { text: 'Compress text files using Gzip', source: 'HTTP compression standards' },
                { text: 'Remove unused CSS and JavaScript code', source: 'Google Lighthouse recommendations' },
                { text: 'Optimize font loading and reduce font variations', source: 'Google Fonts optimization guide' }
            ];

            const shuffled = perfRecommendations.sort(() => 0.5 - Math.random());
            improvements.performance.push(...shuffled.slice(0, Math.floor(Math.random() * 3) + 3));
        }

        function addUXRecommendations(url, improvements) {
            const uxRecommendations = [
                { text: 'Make contact information easily accessible in header or footer', source: 'UX design best practices' },
                { text: 'Add a clear call-to-action button above the fold', source: 'Conversion optimization guidelines' },
                { text: 'Simplify navigation menu - limit to 7 main items', source: 'Miller\'s Rule (cognitive psychology)' },
                { text: 'Add a search function to help users find content', source: 'Website usability standards' },
                { text: 'Improve mobile responsiveness and touch-friendly buttons', source: 'Google Mobile-First indexing' },
                { text: 'Add breadcrumb navigation for better user orientation', source: 'Website navigation best practices' },
                { text: 'Include customer testimonials or social proof', source: 'Conversion optimization research' },
                { text: 'Create a clear value proposition on the homepage', source: 'Landing page optimization guide' },
                { text: 'Add a "Back to Top" button for long pages', source: 'Web usability guidelines' },
                { text: 'Implement error pages (404) with helpful navigation', source: 'HTTP status code best practices' }
            ];

            const shuffled = uxRecommendations.sort(() => 0.5 - Math.random());
            improvements.ux.push(...shuffled.slice(0, Math.floor(Math.random() * 3) + 4));
        }

        function addAccessibilityRecommendations(url, improvements) {
            const a11yRecommendations = [
                { text: 'Improve color contrast ratios to meet WCAG 2.1 standards', source: 'WCAG 2.1 AA compliance guidelines' },
                { text: 'Add focus indicators for keyboard navigation', source: 'WCAG 2.1 keyboard accessibility' },
                { text: 'Include skip navigation links for screen readers', source: 'WCAG 2.1 navigation guidelines' },
                { text: 'Ensure all buttons and links have descriptive labels', source: 'WCAG 2.1 labeling requirements' },
                { text: 'Add captions or transcripts for video content', source: 'WCAG 2.1 multimedia guidelines' },
                { text: 'Use proper heading hierarchy (H1, H2, H3)', source: 'WCAG 2.1 content structure' },
                { text: 'Increase font size for better readability (minimum 16px)', source: 'Web accessibility guidelines' },
                { text: 'Provide alternative text for decorative images', source: 'WCAG 2.1 image accessibility' },
                { text: 'Ensure forms have proper labels and error messages', source: 'WCAG 2.1 form accessibility' },
                { text: 'Test with screen readers and keyboard-only navigation', source: 'Accessibility testing best practices' }
            ];

            const shuffled = a11yRecommendations.sort(() => 0.5 - Math.random());
            improvements.accessibility.push(...shuffled.slice(0, Math.floor(Math.random() * 2) + 3));
        }

        function addContentRecommendations(url, improvements) {
            const contentRecommendations = [
                { text: 'Break up long paragraphs into shorter, scannable sections', source: 'Content readability best practices' },
                { text: 'Add more subheadings to improve content structure', source: 'SEO content optimization guide' },
                { text: 'Include bullet points and numbered lists for easy reading', source: 'Web writing guidelines' },
                { text: 'Add relevant images to break up text-heavy content', source: 'Content engagement best practices' },
                { text: 'Create a clear content hierarchy with proper headings', source: 'Information architecture principles' },
                { text: 'Write compelling page titles and meta descriptions', source: 'Content marketing guidelines' },
                { text: 'Add author bios and publication dates for credibility', source: 'Content trust and authority signals' },
                { text: 'Include related posts or content suggestions', source: 'User engagement optimization' },
                { text: 'Create a consistent tone and voice throughout the site', source: 'Brand content strategy guidelines' },
                { text: 'Add calls-to-action within content to guide users', source: 'Conversion optimization best practices' }
            ];

            const shuffled = contentRecommendations.sort(() => 0.5 - Math.random());
            improvements.content.push(...shuffled.slice(0, Math.floor(Math.random() * 2) + 3));
        }

        function compileResults(improvements) {
            const results = [];

            if (improvements.seo.length > 0) {
                results.push({
                    category: 'SEO Optimization',
                    icon: 'üîç',
                    priority: 'high',
                    items: improvements.seo
                });
            }

            if (improvements.wordpress.length > 0) {
                results.push({
                    category: 'WordPress.com Specific',
                    icon: '‚ö°',
                    priority: 'high',
                    items: improvements.wordpress
                });
            }

            if (improvements.performance.length > 0) {
                results.push({
                    category: 'Performance',
                    icon: 'üöÄ',
                    priority: 'medium',
                    items: improvements.performance
                });
            }

            if (improvements.ux.length > 0) {
                results.push({
                    category: 'User Experience',
                    icon: 'üë§',
                    priority: 'medium',
                    items: improvements.ux
                });
            }

            if (improvements.content.length > 0) {
                results.push({
                    category: 'Content & Structure',
                    icon: '‚úçÔ∏è',
                    priority: 'medium',
                    items: improvements.content
                });
            }

            if (improvements.accessibility.length > 0) {
                results.push({
                    category: 'Accessibility',
                    icon: '‚ôø',
                    priority: 'low',
                    items: improvements.accessibility
                });
            }

            return results;
        }

        function displayResults() {
            const grid = document.getElementById('improvementGrid');
            grid.innerHTML = '';

            analysisResults.improvements.forEach(category => {
                const card = document.createElement('div');
                card.className = `improvement-card priority-${category.priority}`;
                
                const priorityText = category.priority.charAt(0).toUpperCase() + category.priority.slice(1);
                
                const itemsHtml = category.items.map(item => {
                    if (typeof item === 'object') {
                        return `<li>
                            <div class="recommendation-text">${item.text}</div>
                            <div class="recommendation-source">Source: ${item.source}</div>
                        </li>`;
                    } else {
                        return `<li><div class="recommendation-text">${item}</div></li>`;
                    }
                }).join('');
                
                card.innerHTML = `
                    <h3>
                        <span class="icon">${category.icon}</span>
                        ${category.category}
                        <span class="priority-badge">${priorityText}</span>
                    </h3>
                    <ul class="improvement-list">
                        ${itemsHtml}
                    </ul>
                `;
                
                grid.appendChild(card);
            });
        }

        function exportResults() {
            let report = `WordPress.com Website Analysis Report\n${'='.repeat(40)}\n\n`;
            report += `URL: ${analysisResults.url}\n`;
            report += `Analysis Date: ${new Date().toLocaleDateString()}\n`;
            report += `Analyzed by: WordPress.com Team Kirin\n\n`;

            report += `EXECUTIVE SUMMARY\n${'-'.repeat(20)}\n`;
            report += `This analysis provides actionable recommendations to improve your website's\n`;
            report += `performance, SEO, user experience, and WordPress.com optimization.\n\n`;

            analysisResults.improvements.forEach(category => {
                report += `${category.category.toUpperCase()} (${category.priority.toUpperCase()} PRIORITY)\n`;
                report += `${'-'.repeat(category.category.length + 20)}\n`;
                category.items.forEach((item, index) => {
                    report += `${index + 1}. ${item}\n`;
                });
                report += '\n';
            });

            report += `NEXT STEPS\n${'-'.repeat(15)}\n`;
            report += `1. Start with HIGH priority items for immediate impact\n`;
            report += `2. WordPress.com customers can implement these through their admin panel\n`;
            report += `3. Contact WordPress.com support for technical assistance\n`;
            report += `4. Re-analyze after changes to track improvements\n\n`;

            report += `Generated by WordPress.com Website Improvement Analyzer\n`;
            report += `Team Kirin - WordPress.com Happiness Team\n`;

            // Copy to clipboard
            navigator.clipboard.writeText(report).then(() => {
                alert('Report copied to clipboard! You can now paste it into an email or document to share with your customer.');
            }).catch(() => {
                // Fallback: create a downloadable text file
                const blob = new Blob([report], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `wordpress-analysis-${new Date().toISOString().split('T')[0]}.txt`;
                a.click();
                window.URL.revokeObjectURL(url);
                alert('Report downloaded as a text file!');
            });
        }

        function showError(message) {
            const inputSection = document.querySelector('.input-section');
            const existingError = inputSection.querySelector('.error');
            if (existingError) {
                existingError.remove();
            }

            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            inputSection.appendChild(errorDiv);

            setTimeout(() => {
                errorDiv.remove();
            }, 5000);
        }

        // Allow Enter key to trigger analysis
        document.getElementById('urlInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeWebsite();
            }
        });
    </script>
</body>
</html>
